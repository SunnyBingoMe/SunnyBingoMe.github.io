<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]--><!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]--><!--[if !(IE 7) & !(IE 8)]><!--><html lang="en-US"><!--<![endif]--><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Tuning Linode VPS&#65293;&#23567;&#35268;&#27169;&#20302;&#24615;&#33021;&#20302;&#27969;&#37327;&#32593;&#31449;&#20248;&#21270;&#23454;&#36341; | Sunny Blog</title><link rel="profile" href="http://gmpg.org/xfn/11"><link rel="pingback" href="http://log.SunnyBoy.Me/xmlrpc.php"><!--[if lt IE 9]>
<script src="http://log.SunnyBoy.Me/wp-content/themes/twentytwelve/js/html5.js" type="text/javascript"></script>
<![endif]--><link rel="alternate" type="application/rss+xml" title="Sunny Blog &raquo; Feed" href="http://log.SunnyBoy.Me/feed/"><link rel="alternate" type="application/rss+xml" title="Sunny Blog &raquo; Comments Feed" href="http://log.SunnyBoy.Me/comments/feed/"><link rel="alternate" type="application/rss+xml" title="Sunny Blog &raquo; Tuning Linode VPS&#65293;&#23567;&#35268;&#27169;&#20302;&#24615;&#33021;&#20302;&#27969;&#37327;&#32593;&#31449;&#20248;&#21270;&#23454;&#36341; Comments Feed" href="http://log.SunnyBoy.Me/2011/10/11/12753/feed/"><script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/log.SunnyBoy.Me\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.5.1"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+","+c[1]+","+c[2]+","+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style><link rel="stylesheet" id="twentytwelve-fonts-css" href="https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&amp;subset=latin,latin-ext" type="text/css" media="all"><link rel="stylesheet" id="twentytwelve-style-css" href="http://log.SunnyBoy.Me/wp-content/themes/twentytwelve/style.css?ver=4.5.1" type="text/css" media="all"><!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='http://log.SunnyBoy.Me/wp-content/themes/twentytwelve/css/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]--><script type="text/javascript" src="http://log.SunnyBoy.Me/wp-includes/js/jquery/jquery.js?ver=1.12.3"></script><script type="text/javascript" src="http://log.SunnyBoy.Me/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.0"></script><link rel="https://api.w.org/" href="http://log.SunnyBoy.Me/wp-json/"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://log.SunnyBoy.Me/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://log.SunnyBoy.Me/wp-includes/wlwmanifest.xml"><link rel="prev" title="&#26032;&#21457;&#29616;&#30340;&#20998;&#23376;&#65292;&#21487;&#20197;&#21024;&#38500;&#25110;&#36824;&#21407;&#35760;&#24518;" href="http://log.SunnyBoy.Me/2011/10/10/12752/"><link rel="next" title="&#20052;&#24067;&#26031;&#21517;&#35328;&#32763;&#35793;&#26377;&#35823;" href="http://log.SunnyBoy.Me/2011/10/11/12754/"><meta name="generator" content="WordPress 4.5.1"><link rel="canonical" href="http://log.SunnyBoy.Me/2011/10/11/12753/"><link rel="shortlink" href="http://log.SunnyBoy.Me/?p=12753"><link rel="alternate" type="application/json+oembed" href="http://log.SunnyBoy.Me/wp-json/oembed/1.0/embed?url=http%3A%2F%2FBlog.SunnyBoy.Me%2F2011%2F10%2F11%2F12753%2F"><link rel="alternate" type="text/xml+oembed" href="http://log.SunnyBoy.Me/wp-json/oembed/1.0/embed?url=http%3A%2F%2FBlog.SunnyBoy.Me%2F2011%2F10%2F11%2F12753%2F&amp;format=xml"><link rel="icon" href="http://log.SunnyBoy.Me/wp-content/uploads/2010/10/e7919ee585b8ae9809ae98193efbc9f.jpg" sizes="32x32"><link rel="icon" href="http://log.SunnyBoy.Me/wp-content/uploads/2010/10/e7919ee585b8ae9809ae98193efbc9f.jpg" sizes="192x192"><link rel="apple-touch-icon-precomposed" href="http://log.SunnyBoy.Me/wp-content/uploads/2010/10/e7919ee585b8ae9809ae98193efbc9f.jpg"><meta name="msapplication-TileImage" content="http://log.SunnyBoy.Me/wp-content/uploads/2010/10/e7919ee585b8ae9809ae98193efbc9f.jpg"></head><body class="single single-post postid-12753 single-format-standard custom-font-enabled">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner"><hgroup><h1 class="site-title"><a href="http://log.SunnyBoy.Me/" title="Sunny Blog" rel="home">Sunny Blog</a></h1>
			<h2 class="site-description">Mind And Hand Let There Be Light.</h2>
		</hgroup><nav id="site-navigation" class="main-navigation" role="navigation"><button class="menu-toggle">Menu</button>
			<a class="assistive-text" href="#content" title="Skip to content">Skip to content</a>
			<div class="nav-menu"><ul><li><a href="http://log.SunnyBoy.Me/">Home</a></li><li class="page_item page-item-402"><a href="http://log.SunnyBoy.Me/about_me/">About me &#20851;&#20110;&#25105;</a></li><li class="page_item page-item-1566"><a href="http://log.SunnyBoy.Me/media/">Media &#25105;&#30340;&#38899;&#20048;</a></li></ul></div>
		</nav><!-- #site-navigation --></header><!-- #masthead --><div id="main" class="wrapper">
	<div id="primary" class="site-content">
		<div id="content" role="main">

			
				
	<article id="post-12753" class="post-12753 post type-post status-publish format-standard hentry category-others tag-others"><header class="entry-header"><h1 class="entry-title">Tuning Linode VPS&#65293;&#23567;&#35268;&#27169;&#20302;&#24615;&#33021;&#20302;&#27969;&#37327;&#32593;&#31449;&#20248;&#21270;&#23454;&#36341;</h1>
										<div class="comments-link">
					<a href="http://log.SunnyBoy.Me/2011/10/11/12753/#respond"><span class="leave-reply">Leave a reply</span></a>				</div><!-- .comments-link -->
					</header><!-- .entry-header --><div class="entry-content">
			<p>&#20598;&#28982;&#30475;&#21040;&#20197;&#21069;&#20889;&#36807;&#30340;&#36825;&#31687;&#24086;&#23376; &#12302;&#23567;&#35268;&#27169;&#20302;&#24615;&#33021;&#20302;&#27969;&#37327;&#32593;&#31449;&#35774;&#35745;&#21407;&#21017;&#12303;&#65292;&#37325;&#26032;&#21457;&#21040;&#24494;&#21338;&#19978;&#24341;&#36215;&#20102;&#19968;&#28857;&#21453;&#21709;&#65292;&#35273;&#24471;&#26377;&#24517;&#35201;&#20197; <a href="http://www.linode.com/?r=92405a6e282a712f7a1270e98d16eba13efb1b68">Linode</a> <acronym title="Virtual Private Server">VPS</acronym> &#20026;&#20363;&#20877;&#20570;&#20010;&#31616;&#21333;&#30340;&#20248;&#21270;&#23454;&#36341;&#35828;&#26126;&#65292;&#20813;&#24471;&#24635;&#26377;&#20154;&#38382;&#25105;&#65292;&#20063;&#39034;&#20415;&#36186;&#28857;&#28857;&#20987;&#37327; &#128578; </p>
<p>&#20551;&#23450;&#29616;&#22312;&#20320;&#24050;&#32463;&#26377;&#20102;&#19968;&#20010;&#22522;&#26412;&#30340; <acronym title="Virtual Private Server">VPS</acronym> &#21487;&#29992;&#65292;&#22522;&#26412;&#20869;&#23384; 512MB &#12290;&#21442;&#32771;&#23448;&#26041;&#25552;&#20379;&#30340;&#21508;&#31181;<a href="http://library.linode.com/">&#23433;&#35013;&#25351;&#23548;</a>&#23558; LAMP &#36825;&#20010;&#32452;&#21512;&#36816;&#34892;&#20102;&#36215;&#26469;&#65292;&#25805;&#20316;&#31995;&#32479;&#19968;&#33324; Ubuntu &#65292;Web &#26381;&#21153;&#22120; Apache &#65292;&#25968;&#25454;&#24211; MySQL &#65292;&#28982;&#21518;&#26159; <acronym title="PHP (Personal Home Pages) Hypertext Preprocessor">PHP</acronym> &#65292;&#20197;&#21450;&#38656;&#35201;&#23433;&#35013;&#30340;&#24212;&#29992;&#36719;&#20214;&#65292;WordPress &#12289;Drupal &#25110;&#26159; OpenCart &#20160;&#20040;&#30340;&#65292;&#19968;&#27493;&#19968;&#27493;&#37197;&#32622;&#22909;&#65292;&#33021;&#22815;&#27491;&#24120;&#30340;&#27983;&#35272;&#39029;&#38754;&#12290;&#25353;&#29031;&#23448;&#26041;&#25351;&#23548;&#25991;&#26723;&#25805;&#20316;&#30340;&#19968;&#20010;&#22909;&#22788;&#26159;&#20250;&#21253;&#25324;&#19968;&#20123;&#22522;&#26412;&#30340;&#20248;&#21270;&#19968;&#28857;&#30340;&#37197;&#32622;&#12290;&#19981;&#33267;&#20110;&#20986;&#29616;&#22826;&#22823;&#30340;&#38169;&#35823;&#12290;</p>
<p>&#19968;&#26086;&#24212;&#29992;&#23601;&#32490;&#21518;&#65292;&#30331;&#24405;&#21040;&#25805;&#20316;&#31995;&#32479;&#20013;&#65292;&#36890;&#36807; top / iostat / free &#31561;&#22522;&#26412;&#25805;&#20316;&#31995;&#32479;&#21629;&#20196;&#25910;&#38598;&#22522;&#20934;&#25968;&#25454;&#65292;&#20570;&#35760;&#24405;&#12290;&#25910;&#38598;&#20449;&#24687;&#36234;&#20840;&#38754;&#65292;&#23545;&#20110;&#21518;&#38754;&#30340;&#20248;&#21270;&#23601;&#36234;&#20415;&#21033;&#12290;&#20248;&#21270;&#27809;&#26377;&#39764;&#27861;&#65292;&#21482;&#26377;&#21512;&#29702;&#30340;&#26041;&#27861;&#12290;</p>
<p><strong>1.&#20869;&#23384;&#30456;&#20851;&#30340;&#35843;&#25972;</strong></p>
<p>&#20869;&#37096;&#27979;&#35797;&#25110;&#26159;&#36739;&#23567;&#33539;&#22260;&#20351;&#29992;&#65292;&#21487;&#33021;&#36825;&#26679;&#20063;&#19981;&#20250;&#36935;&#21040;&#22826;&#22823;&#38382;&#39064;&#12290;&#19968;&#26086;&#35775;&#38382;&#20154;&#25968;&#22810;&#20102;&#19968;&#28857;&#65292;&#26426;&#22120;&#21709;&#24212;&#21487;&#33021;&#23601;&#26377;&#28857;&#24930;&#20102;&#12290;&#23545;&#20110; <acronym title="Virtual Private Server">VPS</acronym> &#65292;&#31532;&#19968;&#27493;&#30528;&#25163;&#35843;&#25972;&#30340;&#23601;&#26159;&#21508;&#20010;&#32452;&#20214;&#23545;&#20869;&#23384;&#30340;&#20351;&#29992;&#12290;&#22240;&#20026;&#20869;&#23384;&#21463;&#38480;&#65292;&#23545;&#20869;&#23384;&#30340;&#20351;&#29992;&#19968;&#23450;&#35201;&#31934;&#25171;&#32454;&#31639;&#19968;&#28857;&#12290;&#35760;&#20303;&#19968;&#26086;&#20869;&#23384;&#32791;&#23613;&#65292;&#19968;&#37096;&#20998;&#20869;&#23384;&#35843;&#29992;&#21387;&#21040;&#30913;&#30424;&#19978;&#65292;&#31995;&#32479;&#36127;&#36733;&#20250;&#39129;&#21319;&#65292;&#19968;&#33324;&#23601;&#20250;&#25346;&#25481;&#12290;</p>
<p>&#19968;&#33324;&#26469;&#35828;&#65292;&#23545;&#20110; LAMP &#29615;&#22659;&#65292;&#20197;&#19979;&#20960;&#20010;&#22320;&#26041;&#35201;&#27880;&#24847;&#65306;</p>
<p><strong><acronym title="PHP (Personal Home Pages) Hypertext Preprocessor">PHP</acronym> &#31243;&#24207;&#30340;&#20869;&#23384;&#30456;&#20851;&#30340;&#35843;&#25972;</strong></p>
<p>PHP5 &#37197;&#32622;&#25991;&#20214; php.ini &#20013; memory_limit &#23450;&#20041;&#30340;&#20540;&#40664;&#35748;&#24773;&#20917;&#26159;16MB&#65292;&#35813;&#21442;&#25968;&#23450;&#20041;&#21333;&#20010; <acronym title="PHP (Personal Home Pages) Hypertext Preprocessor">PHP</acronym> &#33050;&#26412;&#28040;&#32791;&#26368;&#22823;&#30340;&#20869;&#23384;&#22823;&#23567;(&#22823;&#24847;)&#12290;&#22914;&#26524;&#31243;&#24207;&#26576;&#20010;&#39029;&#38754;&#38656;&#35201;&#30340;&#20869;&#23384;&#36229;&#36807;&#36825;&#20010;&#38480;&#21046;&#65292;&#35775;&#38382;&#32773;&#26368;&#21487;&#33021;&#36935;&#21040;&#19968;&#20010; <acronym title="HyperText Transfer Protocol">HTTP</acronym> 500 &#38169;&#35823;&#65292;&#26597;&#30475; Web &#26381;&#21153;&#22120;&#38169;&#35823;&#26085;&#24535;&#20063;&#21487;&#20197;&#30475;&#21040;&#12290;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#36825;&#20010;&#20540;&#38656;&#35201;&#20570;&#30456;&#24212;&#35843;&#25972;&#12290;&#27604;&#22914;&#35774;&#32622;&#20026;32MB&#65292;&#26159;&#21542;&#21512;&#36866;&#65292;&#38656;&#35201;&#20570;&#35266;&#23519;&#12290;&#26377;&#19968;&#20010;&#32463;&#39564;&#26041;&#27861;&#26159;&#35266;&#23519; top &#21629;&#20196;&#30340;&#36755;&#20986;&#65292;&#30475;&#30456;&#24212;&#36827;&#31243;&#30340; SHR &#23383;&#27573;&#30340;&#20540;&#65292;&#23454;&#38469;&#19978;&#24635;&#26159;&#23613;&#37327;&#22823;&#19968;&#28857;&#28857;&#12290;&#20294;&#19981;&#33021;&#36807;&#22823;&#65292;&#19968;&#26086;&#26377;&#20010;&#21035;&#31243;&#24207;&#20889;&#30340;&#19981;&#22909;&#35843;&#29992;&#30340;&#26102;&#20505;&#21344;&#29992;&#36807;&#22810;&#36164;&#28304;&#65292;&#20250;&#23548;&#33268; <acronym title="Virtual Private Server">VPS</acronym> &#25346;&#25481;&#12290;</p>
<p>&#32463;&#24120;&#26377;&#20154;&#38382;&#65292;&#36825;&#20010;&#26381;&#21153;&#22120;&#36305;&#26576;&#26576; Web &#24212;&#29992;&#65292;&#33021;&#25903;&#25345;&#22810;&#23569;&#24182;&#21457;? &#19968;&#20010;&#22823;&#33268;&#30340;&#24605;&#36335;&#26159;&#20272;&#31639;&#21333;&#20010;&#36827;&#31243;&#21344;&#29992;&#30340;&#20869;&#23384;&#65292;&#30475;&#31995;&#32479;&#33021;&#20998;&#37197;&#22810;&#23569;&#20869;&#23384;&#32473;&#24212;&#29992;&#31243;&#24207;&#65292;&#24182;&#21457;&#30340;&#37327;&#22823;&#33268;&#21487;&#20197;&#20272;&#31639;&#24471;&#21040;&#12290;&#20294;&#23454;&#38469;&#19978;&#65292;&#36825;&#20010;&#25552;&#38382;&#22522;&#26412;&#27809;&#22810;&#22823;&#20215;&#20540;&#12290;</p>
<p>&#21478;&#22806;&#65292;&#36824;&#26377;&#19968;&#20010;&#27604;&#36739;&#37325;&#35201;&#30340;&#21442;&#25968;&#38656;&#35201;&#20462;&#25913; output_buffering &#38656;&#35201;&#20462;&#25913;&#20026; On &#25110;&#26159;&#20855;&#20307;&#25968;&#20540;(eg, 4096)&#12290;&#20462;&#25913;&#37197;&#32622;&#21518;&#65292;&#26816;&#26597;&#26159;&#21542;&#29983;&#25928;(&#22914;&#20309;&#26816;&#26597;?)&#12290;&#21478;&#22806;&#65292;&#35760;&#20303;error_log&#30340;&#20301;&#32622;&#65292;&#38543;&#26102;&#26597;&#30475;&#12290;</p>
<p><strong>MySQL &#25968;&#25454;&#24211;&#20869;&#23384;&#21344;&#29992; </strong></p>
<p>&#22914;&#26524;&#19981;&#30830;&#23450; MySQL &#20869;&#23384;&#20351;&#29992;&#24773;&#20917;&#65292;&#21487;&#20197;&#21033;&#29992; <a href="http://hackmysql.com/mysqlreport">MySQLReport</a> &#36825;&#20010;&#24037;&#20855;&#25910;&#38598;&#19968;&#19979; MySQL &#23454;&#20363;&#30340;&#20449;&#24687;&#25253;&#21578;&#65292;&#19981;&#21516;&#26102;&#38388;&#27573;&#22810;&#25910;&#38598;&#20960;&#27425;&#20316;&#20026;&#23545;&#27604;&#12290;&#28982;&#21518;&#30456;&#24212;&#30340;&#35843;&#25972; key_buffer/query_cache_size &#31561;&#21442;&#25968;&#30340;&#22823;&#23567;, &#19968;&#27425;&#35843;&#25972;&#19968;&#20010;&#21442;&#25968;&#65292;&#37325;&#21551;&#21160; MySQL &#65292;&#32487;&#32493;&#25277;&#21462;&#25253;&#21578;&#65292;&#20998;&#26512;&#25968;&#25454;&#65292;&#28982;&#21518;&#35843;&#25972;&#19979;&#19968;&#20010;&#21442;&#25968;&#12290;&#26082;&#28982;&#38656;&#35201;&#32534;&#36753;&#37197;&#32622;&#25991;&#20214; my.cnf , &#24314;&#35758;&#39034;&#25163;&#21152;&#22823;&#19968;&#28857; max_connections &#36825;&#20010;&#21442;&#25968;(&#20026;&#20160;&#20040;?)&#12290;</p>
<p>&#22810;&#25968;&#20869;&#23384;&#38382;&#39064;&#37117;&#26159;&#30001;&#25968;&#25454;&#24211; I/O &#24341;&#36215;&#65292;&#23548;&#33268; I/O &#38382;&#39064;&#22810;&#30001;&#19981;&#21512;&#29702;&#25968;&#25454;&#24211;&#35843;&#29992;&#26377;&#20851;(&#36825;&#20040;&#35828;&#20005;&#35880;&#20040;?)&#65292;&#35299;&#20915;&#19981;&#21512;&#29702;&#35843;&#29992;&#35201;&#20040;&#20462;&#25913;&#24212;&#29992;&#65292;&#35201;&#20040;&#36890;&#36807;&#26597;&#35810;&#32531;&#23384;&#25110;&#26159; Key-Value Cache &#31561;&#21150;&#27861;&#32531;&#35299;&#12290;&#36825;&#22320;&#26041;&#35828;&#26469;&#35805;&#38271;&#65292;&#20551;&#23450; <acronym title="Virtual Private Server">VPS</acronym> &#19978;&#22522;&#26412;&#19981;&#20250;&#26377;&#36825;&#20040;&#22797;&#26434;&#30340;&#29615;&#22659;&#12290;</p>
<p><strong>2. &#24433;&#21709; <acronym title="Central Processing Unit">CPU</acronym> &#21033;&#29992;&#29575;&#30340;&#35843;&#25972;</strong></p>
<p>&#36825;&#20010;&#20027;&#35201;&#38024;&#23545; <acronym title="PHP (Personal Home Pages) Hypertext Preprocessor">PHP</acronym> &#30340; Opcode(Accelerator) &#32780;&#35328;&#65292;&#35299;&#26512;&#12289;&#32534;&#35793;PHP&#20195;&#30721;&#26159;&#30456;&#24403;&#28040;&#32791;CPU&#30340;&#25805;&#20316;&#12290;&#24120;&#35265;&#30340;&#35201;&#20040;&#26159; <a href="http://pecl.php.net/package/APC">APC</a>, &#35201;&#20040;&#26159; <a href="http://eaccelerator.net/">eAccelerator</a> &#25110;&#26159; XCache&#65292;&#22312; Ubuntu &#19979;&#23433;&#35013;&#37197;&#32622;&#37117;&#30456;&#23545;&#31616;&#21333;&#65292;&#21442;&#25968;&#35843;&#25972;&#31616;&#21333;&#25628;&#32034;&#19968;&#19979;&#23601;&#30693;&#26195;&#20102;&#12290;&#22914;&#26524;&#26159; <acronym title="PHP (Personal Home Pages) Hypertext Preprocessor">PHP</acronym> &#29615;&#22659;&#65292;&#37027;&#20040;&#19968;&#23450;&#35201;&#29992; Opcode &#20943;&#23569; <acronym title="Central Processing Unit">CPU</acronym> &#30340;&#36127;&#33655;(&#20026;&#20160;&#20040;?)&#12290;&#33267;&#20110;&#29992;&#21738;&#19968;&#20010;&#20851;&#31995;&#20498;&#26159;&#19981;&#22823;&#65292;&#20294;&#21069;&#25552;&#26159;&#24517;&#39035;&#35201;&#26377;&#19968;&#20010;&#12290;</p>
<p>&#21478;&#22806;&#65292;&#24352;&#30922;&#21516;&#23398;&#36825;&#31687; <a href="http://www.blogkid.net/archives/2670.html">&#35753;&#36827;&#31243;&#36816;&#34892;&#22312;&#25351;&#23450;&#30340;CPU</a> &#23545;&#20110;&#29305;&#23450;&#38656;&#27714;&#30340;&#24212;&#29992;&#65292;&#24456;&#26377;&#20511;&#37492;&#24847;&#20041;&#12290;</p>
<p><strong>3. &#32593;&#32476;&#21442;&#25968;&#25511;&#21046;</strong></p>
<p>&#20462;&#25913; /etc/sysctl.conf &#25991;&#20214;&#65292;&#22686;&#21152;&#22914;&#19979;&#20960;&#34892;&#65306;</p>
<pre>net.ipv4.tcp_syncookies = 1<br>net.ipv4.tcp_tw_reuse = 1<br>net.ipv4.tcp_tw_recycle = 1</pre>
<p>&#28982;&#21518; sudo sysctl -p &#20351;&#20462;&#25913;&#29983;&#25928;&#12290;&#20351;&#29992;&#22914;&#19979;&#19968;&#34892;&#21629;&#20196;&#35266;&#23519;&#21322;&#36830;&#25509;&#25968;&#37327;&#65306;</p>
<pre>$ netstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'</pre>
<p>&#20854;&#23454;&#19968;&#33324;&#26469;&#35828;&#65292;&#32593;&#32476;&#36830;&#25509;&#25968;&#19981;&#20250;&#25104;&#20026;&#26368;&#26126;&#26174;&#30340;&#29942;&#39048;&#12290;&#20294;&#39034;&#25163;&#35843;&#25972;&#19968;&#19979;&#20063;&#22909;&#65292;&#12300;&#19981;&#36153;&#30005;&#12301;&#12290;&#26377;&#20154;&#38382;&#65292;&#22914;&#26524;&#36935;&#21040; DDoS  &#24590;&#20040;&#21150;&#65311;&#24525;&#30528;&#12290;</p>
<p><strong>4. &#24212;&#29992;&#31243;&#24207;&#30456;&#20851;&#30340;&#35843;&#25972;</strong></p>
<p>&#27604;&#36739;&#27969;&#34892;&#30340;&#24320;&#28304;&#31243;&#24207;&#65292;&#19981;&#23433;&#35013;&#31532;&#19977;&#26041;&#25554;&#20214;&#30340;&#24773;&#20917;&#19979;&#65292;&#24615;&#33021;&#22810;&#23569;&#36807;&#24471;&#21435;&#12290;&#24314;&#35758;&#22914;&#26524;&#27809;&#26377;&#24517;&#35201;&#65292;&#19981;&#35201;&#21551;&#29992;&#36807;&#22810;&#30340;&#31532;&#19977;&#26041;&#25554;&#20214;&#65292;&#23588;&#20854;&#26159;&#19968;&#20123;&#24102;&#26377;&#32479;&#35745;&#25110;&#26159;&#12300;&#26234;&#33021;&#12301;&#26174;&#31034;&#20869;&#23481;&#20043;&#31867;&#30340;&#25554;&#20214;&#33021;&#19981;&#29992;&#23601;&#19981;&#29992;&#12290;</p>
<p>&#36825;&#20123;&#24320;&#28304;&#31243;&#24207;&#20063;&#22522;&#26412;&#19978;&#37117;&#26377;&#38754;&#21521;&#21069;&#31471;&#20248;&#21270;&#30340;&#38745;&#24577;&#21270;&#35299;&#20915;&#26041;&#26696;&#65292;&#27604;&#22914; WordPress &#30340; Cache &#30456;&#20851;&#30340;&#25554;&#20214;&#65292;&#24378;&#28872;&#25512;&#33616;&#21551;&#29992;&#12290;&#26377;&#26102;&#38388;&#30475;&#30475;&#21069;&#31471;&#20248;&#21270;&#30340;&#23454;&#36341;&#24314;&#35758;&#12290;</p>
<p>
(&#22270;&#29255;<a href="http://www.linuxjournal.com/article/10842">&#26469;&#28304;</a>)</p>
<p>&#20248;&#21270;&#26368;&#37325;&#35201;&#30340;&#26159;&#25214;&#21040;&#29942;&#39048;&#65292;&#23545;&#30151;&#19979;&#33647;&#12290;&#21069;&#38754;&#24050;&#32463;&#35828;&#21040;&#20102;&#20869;&#23384;&#12289;CPU&#12289;&#32593;&#32476;&#65292;&#22823;&#33268;&#25552;&#20102;&#19968;&#28857; I/O &#38382;&#39064;&#65292;&#22522;&#26412;&#20063;&#23601;&#22815;&#20102;&#12290;PHP &#30340; Log , MySQL &#30340;&#24930;&#26597;&#35810; Log &#65292;Apache &#30340; Error Log &#65292;&#24120;&#36807;&#28388;&#30475;&#19968;&#19979;&#26377;&#27809;&#26377;&#26032;&#24773;&#20917;&#12290;</p>
<p>&#34917;&#20805;&#19968;&#28857;&#65292;&#21035;&#24536;&#20102;&#20462;&#25913; <acronym title="Operating System">OS</acronym> &#30340; ulimit &#38480;&#21046;&#65306;</p>
<p>&#32534;&#36753; /etc/security/limits.conf &#22686;&#21152;&#22914;&#19979;&#20004;&#34892;(&#20855;&#20307;&#25968;&#20540;&#22823;&#28857;&#23567;&#28857;&#38382;&#39064;&#19981;&#22823;)&#65306;</p>
<pre>*  soft  nofile 40960<br>*  hard  nofile 40960</pre>
<p>&#32534;&#36753; /etc/pam.d/common-session &#65292;&#22686;&#21152;&#22914;&#19979;&#19968;&#34892;&#65306;</p>
<pre>session required pam_limits.so</pre>
<p>&#32534;&#36753; /etc/profile  &#65292;&#22686;&#21152;&#22914;&#19979;&#19968;&#34892;&#65306;</p>
<pre>ulimit -SHn 40960</pre>
<p>&#37325;&#26032;&#21551;&#21160; <acronym title="Operating System">OS</acronym> &#21363;&#21487;&#29983;&#25928;&#12290;</p>
<p>Linode &#21518;&#21488;&#25552;&#20379;&#20102;&#20960;&#20010;&#22522;&#26412;&#30340;&#32479;&#35745;&#22270;&#65292;&#22522;&#26412;&#22815;&#29992;&#12290;&#21487;&#20197;&#35774;&#32622;&#30913;&#30424; I/O &#36807;&#39640;&#30340;&#26102;&#20505;&#25253;&#35686;&#65292;&#31995;&#32479;&#20250;&#21457;&#37038;&#20214;&#32473;&#20320;&#12290;&#27880;&#24847;&#30475;&#19968;&#19979;&#32593;&#32476;&#27969;&#37327;&#30340;&#20351;&#29992;&#12290;&#19981;&#35201;&#22240;&#20026;&#20010;&#21035;&#25991;&#20214;&#34987;&#30423;&#38142;&#32780;&#23558;&#24102;&#23485;&#28040;&#32791;&#27526;&#23613;&#12290;</p>
<p>&#19978;&#38754;&#25552;&#21040;&#30340;&#19981;&#23569;&#20462;&#25913;&#24314;&#35758;&#19981;&#35201;&#29031;&#33899;&#33446;&#30011;&#29922;&#65292;<strong>&#30693;&#20854;&#28982;&#65292;&#36824;&#35201;&#30693;&#20854;&#25152;&#20197;&#28982;</strong>&#12290;&#27599;&#19968;&#27493;&#30340;&#35843;&#25972;&#22810;&#38405;&#35835;&#31995;&#32479;&#25163;&#20876;&#65292;&#23588;&#20854;&#26159;&#28041;&#21450;&#21040;&#20855;&#20307;&#30340;&#21442;&#25968;&#25968;&#20540;&#65292;&#19968;&#23450;&#35201;&#38024;&#23545;&#23454;&#38469;&#24773;&#20917;&#20462;&#25913;&#12290;&#23545;&#22522;&#26412;&#30340;&#37197;&#32622;&#36275;&#22815;&#25484;&#25569;&#20043;&#21518;&#65292;&#21487;&#20197;&#26681;&#25454;&#20855;&#20307;&#24773;&#20917;&#23581;&#35797;&#24615;&#33021;&#25928;&#29575;&#30340;&#32452;&#20214;&#65292;&#27604;&#22914;&#29992; Nginx/Lighttpd &#26367;&#25442; Apache &#65292;&#20294;&#26159;&#35201;&#35760;&#20303;&#65292;&#22914;&#26524; Apache &#19981;&#26159;&#29942;&#39048;&#30340;&#35805;&#65292;&#29992;&#20256;&#35828;&#20013;&#24615;&#33021;&#26356;&#22909;&#30340; Web &#26381;&#21153;&#22120;&#26469;&#26367;&#25442;&#26080;&#30097;&#26159;&#25240;&#33150;&#12290;</p>
<p>&#20877;&#27425;&#25552;&#37266;&#19981;&#35201;&#36807;&#24230;&#20248;&#21270;&#65292;&#36275;&#22815;&#28385;&#36275;&#38656;&#27714;&#23601;&#34892;&#20102;&#12290;&#26377;&#26356;&#22810;&#30340;&#31934;&#21147;&#23436;&#20840;&#21487;&#20197;&#25918;&#22312;&#20854;&#20182;&#29615;&#33410;&#19978;&#12290;&#21478;&#22806;&#65292;&#22914;&#26524;&#22522;&#26412;&#30340;&#35843;&#25972;&#20570;&#36807;&#20043;&#21518;&#65292;&#24819;&#29992;&#26368;&#30465;&#20107;&#30340;&#21150;&#27861;&#25913;&#21892;&#24615;&#33021;&#65292;&#37027;&#20040;&#65292;&#30452;&#25509;&#21521;&#26381;&#21153;&#21830;&#36141;&#20080;&#39069;&#22806;&#30340;&#20869;&#23384;&#21543;&#12290;</p>
<p>&#22909;&#21543;&#65292;&#26368;&#21518;&#25105;&#24819;&#35828;&#30340;&#26159;&#20854;&#23454;&#36825;&#20010;&#20248;&#21270;&#24605;&#36335;&#24182;&#19981;&#23616;&#38480;&#20110; <acronym title="Virtual Private Server">VPS</acronym> &#65292;&#36825;&#20010;&#26368;&#23567;&#23454;&#36341;&#22871;&#36335;&#23545;&#20110;&#22797;&#26434;&#30340;&#26381;&#21153;&#22120;&#29615;&#22659;&#20063;&#26159;&#22522;&#26412;&#36866;&#29992;&#30340;&#12290;</p>
<p>&mdash;<acronym title="End of File">EOF</acronym>&mdash;</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			This entry was posted in <a href="http://log.SunnyBoy.Me/category/others/" rel="category tag">Others</a> and tagged <a href="http://log.SunnyBoy.Me/tag/others/" rel="tag">Others</a> on <a href="http://log.SunnyBoy.Me/2011/10/11/12753/" title="6:25 PM" rel="bookmark"><time class="entry-date" datetime="2011-10-11T18:25:37+00:00">2011/10/11</time></a><span class="by-author"> by <span class="author vcard"><a class="url fn n" href="http://log.SunnyBoy.Me/author/sunny/" title="View all posts by Sunny" rel="author">Sunny</a></span></span>.								</footer><!-- .entry-meta --></article><!-- #post --><nav class="nav-single"><h3 class="assistive-text">Post navigation</h3>
					<span class="nav-previous"><a href="http://log.SunnyBoy.Me/2011/10/10/12752/" rel="prev"><span class="meta-nav">&larr;</span> &#26032;&#21457;&#29616;&#30340;&#20998;&#23376;&#65292;&#21487;&#20197;&#21024;&#38500;&#25110;&#36824;&#21407;&#35760;&#24518;</a></span>
					<span class="nav-next"><a href="http://log.SunnyBoy.Me/2011/10/11/12754/" rel="next">&#20052;&#24067;&#26031;&#21517;&#35328;&#32763;&#35793;&#26377;&#35823; <span class="meta-nav">&rarr;</span></a></span>
				</nav><!-- .nav-single --><div id="comments" class="comments-area">

	
	
					<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://log.SunnyBoy.Me/2011/10/11/12753/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="http://log.SunnyBoy.Me/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name</label> <input id="author" name="author" type="text" value="" size="30" maxlength="245"></p>
<p class="comment-form-email"><label for="email">Email</label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes"></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"><input type="hidden" name="comment_post_ID" value="12753" id="comment_post_ID"><input type="hidden" name="comment_parent" id="comment_parent" value="0"></p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="77afdf3dec"></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="166"></p>				</form>
					</div><!-- #respond -->
		
</div><!-- #comments .comments-area -->
			
		</div><!-- #content -->
	</div><!-- #primary -->


			<div id="secondary" class="widget-area" role="complementary">
			<aside id="calendar-3" class="widget widget_calendar"><h3 class="widget-title">Posts Calendar</h3><div id="calendar_wrap" class="calendar_wrap"><table id="wp-calendar"><caption>October 2011</caption>
	<thead><tr><th scope="col" title="Monday">M</th>
		<th scope="col" title="Tuesday">T</th>
		<th scope="col" title="Wednesday">W</th>
		<th scope="col" title="Thursday">T</th>
		<th scope="col" title="Friday">F</th>
		<th scope="col" title="Saturday">S</th>
		<th scope="col" title="Sunday">S</th>
	</tr></thead><tfoot><tr><td colspan="3" id="prev"><a href="http://log.SunnyBoy.Me/2011/09/">&laquo; Sep</a></td>
		<td class="pad">&nbsp;</td>
		<td colspan="3" id="next"><a href="http://log.SunnyBoy.Me/2011/11/">Nov &raquo;</a></td>
	</tr></tfoot><tbody><tr><td colspan="5" class="pad">&nbsp;</td><td>1</td><td>2</td>
	</tr><tr><td><a href="http://log.SunnyBoy.Me/2011/10/03/" aria-label="Posts published on October 3, 2011">3</a></td><td><a href="http://log.SunnyBoy.Me/2011/10/04/" aria-label="Posts published on October 4, 2011">4</a></td><td><a href="http://log.SunnyBoy.Me/2011/10/05/" aria-label="Posts published on October 5, 2011">5</a></td><td>6</td><td><a href="http://log.SunnyBoy.Me/2011/10/07/" aria-label="Posts published on October 7, 2011">7</a></td><td>8</td><td>9</td>
	</tr><tr><td><a href="http://log.SunnyBoy.Me/2011/10/10/" aria-label="Posts published on October 10, 2011">10</a></td><td><a href="http://log.SunnyBoy.Me/2011/10/11/" aria-label="Posts published on October 11, 2011">11</a></td><td><a href="http://log.SunnyBoy.Me/2011/10/12/" aria-label="Posts published on October 12, 2011">12</a></td><td><a href="http://log.SunnyBoy.Me/2011/10/13/" aria-label="Posts published on October 13, 2011">13</a></td><td><a href="http://log.SunnyBoy.Me/2011/10/14/" aria-label="Posts published on October 14, 2011">14</a></td><td><a href="http://log.SunnyBoy.Me/2011/10/15/" aria-label="Posts published on October 15, 2011">15</a></td><td>16</td>
	</tr><tr><td><a href="http://log.SunnyBoy.Me/2011/10/17/" aria-label="Posts published on October 17, 2011">17</a></td><td>18</td><td><a href="http://log.SunnyBoy.Me/2011/10/19/" aria-label="Posts published on October 19, 2011">19</a></td><td>20</td><td>21</td><td><a href="http://log.SunnyBoy.Me/2011/10/22/" aria-label="Posts published on October 22, 2011">22</a></td><td>23</td>
	</tr><tr><td><a href="http://log.SunnyBoy.Me/2011/10/24/" aria-label="Posts published on October 24, 2011">24</a></td><td>25</td><td>26</td><td><a href="http://log.SunnyBoy.Me/2011/10/27/" aria-label="Posts published on October 27, 2011">27</a></td><td><a href="http://log.SunnyBoy.Me/2011/10/28/" aria-label="Posts published on October 28, 2011">28</a></td><td>29</td><td><a href="http://log.SunnyBoy.Me/2011/10/30/" aria-label="Posts published on October 30, 2011">30</a></td>
	</tr><tr><td>31</td>
		<td class="pad" colspan="6">&nbsp;</td>
	</tr></tbody></table></div></aside><aside id="categories-3" class="widget widget_categories"><h3 class="widget-title">Categories</h3>		<ul><li class="cat-item cat-item-3"><a href="http://log.SunnyBoy.Me/category/default/">Default</a> (75)
</li>
	<li class="cat-item cat-item-4"><a href="http://log.SunnyBoy.Me/category/english/">English</a> (1)
</li>
	<li class="cat-item cat-item-5"><a href="http://log.SunnyBoy.Me/category/for-the-music/">For The Music !</a> (55)
</li>
	<li class="cat-item cat-item-27"><a href="http://log.SunnyBoy.Me/category/jobb/">Jobb</a> (6)
</li>
	<li class="cat-item cat-item-9"><a href="http://log.SunnyBoy.Me/category/languages/">Languages</a> (5)
</li>
	<li class="cat-item cat-item-7"><a href="http://log.SunnyBoy.Me/category/leading/">Leading</a> (36)
</li>
	<li class="cat-item cat-item-83"><a href="http://log.SunnyBoy.Me/category/life/">Life</a> (134)
</li>
	<li class="cat-item cat-item-72"><a href="http://log.SunnyBoy.Me/category/matlab/">Matlab</a> (1)
</li>
	<li class="cat-item cat-item-77"><a href="http://log.SunnyBoy.Me/category/nix/">nix</a> (5)
</li>
	<li class="cat-item cat-item-1"><a href="http://log.SunnyBoy.Me/category/others/">Others</a> (719)
</li>
	<li class="cat-item cat-item-31"><a href="http://log.SunnyBoy.Me/category/php/">Php</a> (3)
</li>
	<li class="cat-item cat-item-82"><a href="http://log.SunnyBoy.Me/category/pol/">POL</a> (9)
</li>
	<li class="cat-item cat-item-86"><a href="http://log.SunnyBoy.Me/category/py/">py</a> (1)
</li>
	<li class="cat-item cat-item-76"><a href="http://log.SunnyBoy.Me/category/seo/">seo</a> (1)
</li>
	<li class="cat-item cat-item-62"><a href="http://log.SunnyBoy.Me/category/softskills/">Soft&amp;Skills</a> (47)
</li>
	<li class="cat-item cat-item-8"><a href="http://log.SunnyBoy.Me/category/stefanie/">Stefanie</a> (195)
</li>
	<li class="cat-item cat-item-11"><a href="http://log.SunnyBoy.Me/category/svenska/">Svenska</a> (25)
</li>
	<li class="cat-item cat-item-73"><a href="http://log.SunnyBoy.Me/category/sverige/">Sverige</a> (3)
</li>
	<li class="cat-item cat-item-12"><a href="http://log.SunnyBoy.Me/category/swe/">SWE</a> (2)
</li>
	<li class="cat-item cat-item-74"><a href="http://log.SunnyBoy.Me/category/cssdiv/">web</a> (5)
</li>
		</ul></aside><aside id="linkcat-2" class="widget widget_links"><h3 class="widget-title">Suggest Link</h3>
	<ul class="xoxo blogroll"><li><a href="http://blog.zhaoqi.org" rel="friend" title="A blog of my best friend." target="_blank">Q's Blog</a>
A blog of my best friend.</li>
<li><a href="http://db.tt/GlIsWkt" title="Use this link to get 250M bonus  ~ " target="_blank">Recommended Soft: DropBox</a>
Use this link to get 250M bonus  ~ </li>
<li><a href="http://feedburner.google.com/fb/a/mailverify?uri=SunnyRSS&amp;loc=en_US">Subscribe My Blog by Email</a></li>
<li><a href="http://log.SunnyBoy.Me/feed/">Subscribe My Blog by RSS</a></li>

	</ul></aside></div><!-- #secondary -->
		</div><!-- #main .wrapper -->
	<footer id="colophon" role="contentinfo"><div class="site-info">
						<a href="https://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
		</div><!-- .site-info -->
	</footer><!-- #colophon --></div><!-- #page -->

<script type="text/javascript" src="http://log.SunnyBoy.Me/wp-content/plugins/akismet/_inc/form.js?ver=3.1.10"></script><script type="text/javascript" src="http://log.SunnyBoy.Me/wp-includes/js/comment-reply.min.js?ver=4.5.1"></script><script type="text/javascript" src="http://log.SunnyBoy.Me/wp-content/themes/twentytwelve/js/navigation.js?ver=20140711"></script><script type="text/javascript" src="http://log.SunnyBoy.Me/wp-includes/js/wp-embed.min.js?ver=4.5.1"></script></body></html>
